/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function($){"use strict";function t(t,e,i){var a;return function(){var n=this,o=arguments,r=function(){a=null,i||t.apply(n,o)},s=i&&!a;clearTimeout(a),a=setTimeout(r,e),s&&t.apply(n,o)}}function e(t){var e=++d;return String(null==t?"rmjs-":t)+e}function i(t){var e=t.clone().css({height:"auto",width:t.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(t),i=e.outerHeight(),a=parseInt(e.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),n=t.data("defaultHeight");e.remove();var o=a||t.data("collapsedHeight")||n;t.data({expandedHeight:i,maxHeight:a,collapsedHeight:o}).css({maxHeight:"none"})}function a(t){if(!s[t.selector]){var e=" ";t.embedCSS&&""!==t.blockCSS&&(e+=t.selector+" + [data-readmore-toggle], "+t.selector+"[data-readmore]{"+t.blockCSS+"}"),e+=t.selector+"[data-readmore]{transition: height "+t.speed+"ms;overflow: hidden;}",function(t,e){var i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),t.getElementsByTagName("head")[0].appendChild(i)}(document,e),s[t.selector]=!0}}function n(t,e){this.element=t,this.options=$.extend({},r,e),a(this.options),this._defaults=r,this._name=o,this.init(),window.addEventListener?(window.addEventListener("load",h),window.addEventListener("resize",h)):(window.attachEvent("load",h),window.attachEvent("resize",h))}var o="readmore",r={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},s={},d=0,h=t(function(){$("[data-readmore]").each(function(){var t=$(this),e="true"===t.attr("aria-expanded");i(t),t.css({height:t.data(e?"expandedHeight":"collapsedHeight")})})},100);n.prototype={init:function(){var t=$(this.element);t.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),i(t);var a=t.data("collapsedHeight"),n=t.data("heightMargin");if(t.outerHeight(!0)<=a+n)return!0;var o=t.attr("id")||e(),r=this.options.startOpen?this.options.lessLink:this.options.moreLink;t.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:o}),t.after($(r).on("click",function(e){return function(i){e.toggle(this,t[0],i)}}(this)).attr({"data-readmore-toggle":"","aria-controls":o})),this.options.startOpen||t.css({height:a})},toggle:function(t,e,i){i&&i.preventDefault(),t||(t=$('[aria-controls="'+_this.element.id+'"]')[0]),e||(e=_this.element);var a=$(e),n="",o="",r=!1,s=a.data("collapsedHeight");a.height()<=s?(n=a.data("expandedHeight")+"px",o="lessLink",r=!0):(n=s,o="moreLink"),this.options.beforeToggle(t,a,!r),a.css({height:n}),a.on("transitionend",function(e){return function(){e.options.afterToggle(t,a,r),$(this).attr({"aria-expanded":r}).off("transitionend")}}(this)),$(t).replaceWith($(this.options[o]).on("click",function(t){return function(i){t.toggle(this,e,i)}}(this)).attr({"data-readmore-toggle":"","aria-controls":a.attr("id")}))},destroy:function(){$(this.element).each(function(){var t=$(this);t.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),t.removeData()})}},$.fn.readmore=function(t){var e=arguments,i=this.selector;return t=t||{},"object"==typeof t?this.each(function(){if($.data(this,"plugin_"+o)){var e=$.data(this,"plugin_"+o);e.destroy.apply(e)}t.selector=i,$.data(this,"plugin_"+o,new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var i=$.data(this,"plugin_"+o);i instanceof n&&"function"==typeof i[t]&&i[t].apply(i,Array.prototype.slice.call(e,1))}):void 0}});