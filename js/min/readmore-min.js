/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function($){"use strict";function t(t,e,i){var o;return function(){var n=this,a=arguments,s=function(){o=null,i||t.apply(n,a)},r=i&&!o;clearTimeout(o),o=setTimeout(s,e),r&&t.apply(n,a)}}function e(t){var e=++d;return String(null==t?"rmjs-":t)+e}function i(t){var e=t.clone().css({height:"auto",width:t.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(t),i=e.outerHeight(),o=parseInt(e.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),n=t.data("defaultHeight");e.remove();var a=o||t.data("collapsedHeight")||n;t.data({expandedHeight:i,maxHeight:o,collapsedHeight:a}).css({maxHeight:"none"})}function o(t){if(!r[t.selector]){var e=" ";t.embedCSS&&""!==t.blockCSS&&(e+=t.selector+" + [data-readmore-toggle], "+t.selector+"[data-readmore]{"+t.blockCSS+"}"),e+=t.selector+"[data-readmore]{transition: height "+t.speed+"ms;overflow: hidden;}",function(t,e){var i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),t.getElementsByTagName("head")[0].appendChild(i)}(document,e),r[t.selector]=!0}}function n(t,e){this.element=t,this.options=$.extend({},s,e),o(this.options),this._defaults=s,this._name=a,this.init(),window.addEventListener?(window.addEventListener("load",h),window.addEventListener("resize",h)):(window.attachEvent("load",h),window.attachEvent("resize",h))}var a="readmore",s={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},r={},d=0,h=t(function(){$("[data-readmore]").each(function(){var t=$(this),e="true"===t.attr("aria-expanded");i(t),t.css({height:t.data(e?"expandedHeight":"collapsedHeight")})})},100);n.prototype={init:function(){var t=$(this.element);t.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),i(t);var o=t.data("collapsedHeight"),n=t.data("heightMargin");if(t.outerHeight(!0)<=o+n)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(t,!1),!0;var a=t.attr("id")||e(),s=this.options.startOpen?this.options.lessLink:this.options.moreLink;t.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:a}),t.after($(s).on("click",function(e){return function(i){e.toggle(this,t[0],i)}}(this)).attr({"data-readmore-toggle":a,"aria-controls":a})),this.options.startOpen||t.css({height:o}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(t,!0)},toggle:function(t,e,i){i&&i.preventDefault(),t||(t=$('[aria-controls="'+this.element.id+'"]')[0]),e||(e=this.element);var o=$(e),n="",a="",s=!1,r=o.data("collapsedHeight");o.height()<=r?(n=o.data("expandedHeight")+"px",a="lessLink",s=!0):(n=r,a="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(t,o,!s),o.css({height:n}),o.on("transitionend",function(e){return function(){e.options.afterToggle&&"function"==typeof e.options.afterToggle&&e.options.afterToggle(t,o,s),$(this).attr({"aria-expanded":s}).off("transitionend")}}(this)),$(t).replaceWith($(this.options[a]).on("click",function(t){return function(i){t.toggle(this,e,i)}}(this)).attr({"data-readmore-toggle":o.attr("id"),"aria-controls":o.attr("id")}))},destroy:function(){$(this.element).each(function(){var t=$(this);t.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),t.removeData()})}},$.fn.readmore=function(t){var e=arguments,i=this.selector;return t=t||{},"object"==typeof t?this.each(function(){if($.data(this,"plugin_"+a)){var e=$.data(this,"plugin_"+a);e.destroy.apply(e)}t.selector=i,$.data(this,"plugin_"+a,new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var i=$.data(this,"plugin_"+a);i instanceof n&&"function"==typeof i[t]&&i[t].apply(i,Array.prototype.slice.call(e,1))}):void 0}});